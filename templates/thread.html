
<div class="thread" ng-click="controller.selectComment(threadController)">
	<div class="comment-row">
		<img
			class="user-img"
			src="{{::threadController.authorProfileImageUrl}}"
			height="75"
			/>
			<div class="comment-middle">
				<div class="comment-header">
					<a
						class="comment-username"
						href="{{::threadController.authorChannelUrl}}"
						target="_blank"
						>{{::threadController.authorDisplayName}}</a>

					<div class="comment-date" title="{{::threadController.publishedAt | date:'medium'}}">
						{{::threadController.publishedAtDisplay}}
					</div>
				</div>
				<div
					class="comment-text-middle"
					ng-bind-html="threadController.textDisplay"
					></div>
			</div>

			<a
				class="video-img"
				href="{{::threadController.videoUrl}}"
				target="_blank">
				<img
					src="{{::threadController.videoImageUrl}}"
					height="75"
					/>
			</a>
	</div>

	<div class="comment-text-bottom" ng-bind-html="threadController.textDisplay"></div>
</div>

<!-- Post reply -->

<div ng-if="threadController.isSelected" class="thread-reply-button">
	<textarea
		ng-disabled="threadController.waitingForReplyResponse"
		class="whole-width-textarea"
		ng-model="threadController.replyText"
		></textarea>

	<div ng-if="threadController.replyPostError" class="alert alert-danger" role="alert">
		<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
		<span class="sr-only">Error:</span>
		<span ng-bind-html="threadController.replyPostError"></span>
	</div>

	<div ng-if="threadController.waitingForReplyResponse" class="vertical-align">
		<span>Posting...</span>
		<span class="glyphicon glyphicon-refresh glyphicon-animate" aria-hidden="true"></span>
	</div>

	<button
		ng-disabled="!threadController.replyEnabled || threadController.waitingForReplyResponse"
		class="whole-width-button"
		ng-click="controller.postReply(threadController)"
		>Reply</button>
</div>

<!-- Hide all replies -->

<div ng-if="threadController.allRepliesShown" class="show-reply-container">
	<button class="whole-width-button" ng-click="threadController.toggleReplyDisplay()">{{threadController.buttonText}}</button>
</div>

<!-- Reply List -->

<ng-include ng-repeat="replyController in threadController.replies" src="'templates/reply.html'" ></ng-include>

<!-- Toggle All replies -->

<div ng-if="threadController.buttonText" class="show-reply-container">
	<button class="whole-width-button" ng-click="threadController.toggleReplyDisplay()">{{threadController.buttonText}}</button>
</div>
